return {
    'folke/snacks.nvim',

    lazy = false,
    priority = 1000,

    opts = {
        input = { enabled = true },

        notifier = { enabled = true },

        explorer = { enabled = true },

        dashboard = {
            enabled = true,

            preset = {
                header = [[
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢰⣆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣾⠛⣧⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣼⡟⠀⢹⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀ ⠀⠀⢀⣠⣴⣶⡾⠿⠿⠿⠿⠶⢶⣤⣄⡀⠀⠀⠀⠀⣀⣀⣤⣤⣀⡀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣼⡟⠀⡄⠘⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀ ⠀⣴⣿⠟⠋⠀⠀⢀⣀⠀⠀⠀⠀⠀⠈⠙⠂⣠⣶⠟⠛⠉⠉⠛⠻⢿⣷⣦⡀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⡿⠋⠀⣰⠃⢸⡿⠀⠀⠀⠀⢀⣴⣾⠃⠀⠀⠀ ⣼⣿⠃⠀⣠⣶⠿⠿⠿⠿⣷⣄⠀⠀⠀⠀⣼⡟⠁⢀⣤⣶⣶⣶⣤⡀⠙⢿⣿⡄
⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⣾⠋⠀⢀⡾⠃⠀⣾⠃⠀⠀⢀⡴⠋⢠⡟⠀⠀⠀⠀ ⣿⡟⠀⢸⣿⠁⠀⠀⠀⠀⠈⢿⣆⠀⠀⢠⣿⠀⢠⣿⠀⠀⠀⠈⢻⣷⠀⠈⣿⣿
⠀⠀⠀⠀⠀⠀⠀⠀⣼⡟⠁⠀⣰⡿⠁⠀⣸⡏⠀⠀⣰⠟⠀⠄⢸⡇⠀⠀⠀⠀ ⢻⣧⠀⠸⣿⡀⠀⠈⢹⡆⠀⢸⣿⠀⠀⠈⣿⡆⠀⠻⠦⠜⠀⠀⢀⣿⠀⠀⢸⣿
⠀⢶⣤⣀⡀⠀⠀⢰⡟⠀⠀⢰⣿⠁⠀⠀⣿⠀⠀⣴⡏⠀⣼⠀⢸⣧⠀⠀⠀⠀ ⠈⢿⣆⠀⠙⠻⠶⠶⠟⠁⠀⣼⡏⠀⠀⠀⠘⢿⣦⣀⠀⠀⢀⣠⣾⠏⠀⠀⣿⡏
⠀⠈⣧⠉⠛⢶⣄⢸⡇⠀⠀⢸⣿⠀⠀⠀⢿⡄⢀⣿⠀⠀⢻⠀⠈⢿⣆⠀⠀⠀ ⠀⠀⠻⢷⣤⣀⣀⣀⣀⣤⡾⠋⠀⠀⠀⠀⠀⠀⠉⠛⠿⠿⠿⠛⠁⠀⠀⣼⡟⠀
⠀⠀⣿⠀⠀⡀⢻⣦⢇⠀⠀⠸⣿⣀⠀⠀⠈⠻⣾⣿⠀⠀⠸⡄⠀⠘⣿⣆⠀⠀ ⠀⠀⠀⠀⢉⠙⠛⠛⠋⠁⢀⣴⡾⠛⠛⠛⠷⣦⣄⠀⠀⠀⠀⠀⠀⢀⣾⠋⠀⠀
⠀⠀⣿⠀⠀⢧⠀⣿⡌⢀⣴⠾⠟⠛⠛⠷⣶⣄⠈⠻⣧⠀⠀⢧⠀⠀⠈⢻⣦⠀ ⠀⠀⠀⠀⢸⠀⠀⠀⠀⣰⣿⠋⠀⢀⣤⣤⡀⠈⠻⣧⠀⠀⠀⣀⡴⠛⠁⠀⠀⠀
⠀⣼⡇⠀⠀⢸⠀⢸⣷⡟⠁⠀⣀⣤⣄⡀⠀⢻⡆⠀⢹⣧⠀⠸⡆⠀⠀⠀⢻⣇ ⠀⠀⠀⠀⢸⣇⠀⠀⠀⣿⡇⠀⠀⢯⡀⠈⢻⡄⠀⢹⡇⠐⠉⠁⠀⠀⠀⠀⠀⠀
⢠⡿⠀⠀⠀⣿⠀⢸⣿⠀⠀⣼⠏⠉⠉⢻⠀⠀⣿⠀⢀⣿⠀⠀⢿⠀⠀⠀⠘⣿ ⠀⠀⠀⠀⠀⢿⡄⠀⠀⢻⣿⡀⠀⠀⠀⢀⣼⡇⠀⣸⡟⠀⠀⠀⠀⠀⠀⠀⠀⠀
⣾⠃⠀⠀⢰⡇⠀⢸⣿⠀⠀⣿⠀⠐⠴⠊⠀⣰⡟⠀⣸⡿⠀⠀⢸⠆⠀⠀⠀⣿ ⠀⠀⠀⠀⠀⠈⢿⣦⡀⠀⠙⢿⣶⣶⣶⡿⠋⠀⣠⣿⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀
⣿⡀⠀⠀⢸⡇⠀⠘⣿⣄⠀⠙⢷⣤⣤⣤⡾⠏⠀⣰⣿⠃⠀⢀⣿⠀⠀⠀⣸⠏ ⠀⠀⠀⠀⠀⠀⠀⠻⢿⣶⣤⣀⡀⠀⠀⣀⣠⣾⡿⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠘⢷⡀⠀⠸⣷⡀⠀⠈⠻⣷⣤⣀⠀⠉⢀⣀⣤⣾⡿⠁⠀⢀⣾⠏⠀⢀⡴⠋⠀ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠙⠻⢿⣿⣿⣿⠿⠟⠋⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠉⠑⠂⠙⠳⣤⡀⠀⠀⠉⠛⠛⠛⠛⠛⠋⠁⠀⢀⣠⡿⠃⠐⠊⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠉⠛⠶⠦⣤⣤⣤⣤⣤⣤⠶⠾⠛⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⠀⣠⣶⣿⠿⠿⠿⠿⠿⠿⠿⠿⠿⢶⣦⡀⠀⠀⠀⠀⠀⠀⠀ ⠀⠀⠀⠀⠀⠀⠀⢀⣠⣤⣶⣶⣾⡿⠿⠿⢿⣷⣶⣶⣦⣤⣀⠀⠀⠀⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⠀⣼⡿⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠹⣿⡀⠀⠀⠀⠀⠀⠀ ⠀⠀⠀⠀⢀⣴⣾⣿⠿⠛⠛⠛⠛⠻⠶⣦⣀⠀⠀⠀⠉⠙⠻⣿⣦⣄⠀⠀⠀⠀
⠀⠀⠀⠀⠀⠀⢠⡿⠀⠀⠀⠀⢀⣠⣤⣤⣤⣀⡀⠀⠀⠀⢹⣧⠀⠀⠀⠀⠀⠀ ⠀⠀⢀⣴⣿⠛⠉⠀⠀⠀⠀⠀⠀⠀⠀⠈⠻⣷⣤⠶⠛⠛⢶⡈⢿⠻⣷⡀⠀⠀
⠀⠀⠀⠀⠀⠀⣾⠃⠀⠀⢠⣾⠟⠋⠉⠉⠉⠙⠻⣷⡄⠀⠀⢿⡄⠀⠀⠀⠀⠀ ⠀⢠⣿⡟⣁⣀⣤⣤⣄⡀⠀⢀⣠⣤⣤⣄⡀⠘⣿⠀⢠⠀⢀⡇⢸⠀⠈⢻⡄⠀
⠀⠀⠀⠀⠀⣸⡟⠀⠀⢰⡿⠁⠀⠀⣠⣤⣤⡀⠀⠈⢿⡆⠀⠘⣷⠀⠀⠀⠀⠀ ⢠⣿⣿⠟⠛⠉⠉⠉⠉⠻⣷⡿⠋⠀⡀⠈⢷⠀⢸⣧⣈⠑⢉⣠⠟⠀⠀⠀⣿⡄
⠀⠀⠀⠀⢰⡿⠀⠀⢀⣿⠃⠀⢠⣿⠋⠉⠉⢻⡆⠀⢸⣿⠀⠀⢹⣧⠀⠀⠀⠀ ⣸⡿⠁⠀⠀⣀⣠⣀⡀⠀⠘⣧⠀⢮⡀⢀⡜⢀⣿⠋⠉⢉⣩⣥⣶⣶⣶⣶⣾⣧
⠀⠀⠀⢠⣿⠃⠀⠀⢸⣿⠀⠀⢾⡇⠀⢄⠀⣸⠇⠀⣸⡟⠀⠀⠀⣿⡄⠀⠀⠀ ⣿⠇⠀⣰⡿⠋⠉⠉⢻⡄⠀⣿⣆⣀⠉⣉⣤⡾⢃⣴⡾⠛⠉⠀⠀⠀⠀⠀⠘⣿
⠀⠀⠀⣼⡏⠀⠀⠀⠈⢿⡄⠀⠸⣧⣀⠀⠉⠀⠀⣠⡟⠁⠀⠀⠀⠸⣷⠀⠀⠀ ⣿⠀⠀⣿⠀⠀⣆⢀⡸⠃⢠⣿⠉⠛⠛⠉⣡⣶⠟⠁⠀⠀⣀⣤⣶⣶⠶⠶⣶⣿
⠀⠀⢰⡿⠀⠀⠀⠀⠀⠘⢷⣄⠀⠈⠛⠿⠿⠿⠛⠉⠀⠀⠀⠀⠀⠀⢻⣇⠀⠀ ⣿⡀⠀⠻⣦⣀⠈⠁⣀⣴⠿⠁⠀⢀⣠⣾⠟⠁⠀⠀⣠⡾⠛⠉⠀⠀⠀⠀⢸⣿
⠀⠀⣾⠃⠀⠀⠀⠀⠀⠀⠀⠙⠿⢶⣤⣤⣤⠴⠂⠀⠀⠀⠀⠀⠀⠀⠘⣿⡄⠀ ⢸⣿⣦⣄⡈⠙⠛⠛⠋⠁⣀⣠⣶⠿⠋⠀⠀⢀⣠⣾⠏⠀⠀⠀⣀⣠⣤⣤⣿⡇
⠀⣼⡏⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⣷⠀ ⠘⣿⡉⠛⠻⠿⠿⠿⠿⠛⠛⠉⠀⠀⠀⣠⣴⠿⠋⠀⠀⢀⣴⠾⠛⠉⠉⣹⡿⠀
⢰⣿⠁⠀⢠⣤⣤⣤⣤⣤⣤⣶⣤⣤⣤⠀⣠⣴⣶⣶⣶⣶⣶⣶⣶⣦⠀⠀⢿⣇ ⠀⠹⣷⣄⡀⠀⠀⠀⠀⠀⢀⣀⣤⡶⠟⠋⠁⠀⠀⢀⣴⠟⠁⠀⠀⠀⣰⡿⠁⠀
⣿⡏⠀⠀⠀⠉⠉⠉⠉⠉⠉⠁⠀⢹⣿⠀⣿⡏⠉⠁⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿ ⠀⠀⠙⢿⣿⡟⠿⠿⠟⠛⠛⠉⠁⠀⠀⠀⠀⣠⣾⠟⠁⠀⠀⠀⣠⣾⠟⠁⠀⠀
⣿⡇⠀⢰⣶⣶⣶⣶⣶⣶⣶⣶⣶⣾⣿⠀⣿⣷⣶⣶⣶⣶⣶⡶⠶⢶⠦⠀⢸⣿ ⠀⠀⠀⠈⠙⢿⣷⣤⣄⣀⣀⣀⣀⣀⣤⣴⡾⠟⠁⠀⠀⣀⣤⣾⠟⠁⠀⠀⠀⠀
⣿⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿⠀⣿⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿ ⠀⠀⠀⠀⠀⠀⠈⠙⠛⠻⠿⠿⣿⣿⣿⣶⣶⣶⡶⠿⠟⠛⠉⠀⠀⠀⠀⠀⠀⠀
⠻⣿⣶⣶⣶⣶⣶⣶⣶⣶⣶⣶⣶⣾⡿⠀⢹⣿⣶⣶⣶⣶⣶⣶⣶⣶⣶⣶⡿⠟ ⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
]],
            },

            sections = {
                { section = 'header' }
            }
        },

        picker = {
            enabled = true,

            sources = {
                explorer = {
                    auto_close = true,
                    hidden = true,
                    ignored = true,
                },

                files = {
                    hidden = true,
                    ignored = true,
                },
            },
        },
    },

    keys = {
        { '<leader>ff', function() Snacks.picker.files() end, desc = 'find files'},
        { '<leader>fg', function() Snacks.picker.grep() end, desc = 'grep through files'},
        { '<leader>fe', function() Snacks.explorer() end, desc = 'open the file explorer'},
    },
}
